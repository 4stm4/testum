# Update System UI Preview

## Settings Page - Updates Section

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”„ Application Updates                                         â”‚
â”‚                                                                 â”‚
â”‚  Check for and install updates from GitHub                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Current Version                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ 0.1.0           â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                 â”‚
â”‚  Current Branch                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ main            â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                 â”‚
â”‚  Current Commit                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ abc1234         â”‚                                           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                 â”‚
â”‚  Latest Version Available                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚
â”‚  â”‚ v0.2.0 ğŸ‰       â”‚  (green)                                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚                                                                 â”‚
â”‚  Release Notes                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ## What's New in v0.2.0                                 â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ ### Features                                            â”‚   â”‚
â”‚  â”‚ - ğŸ”„ Added automatic update system                      â”‚   â”‚
â”‚  â”‚ - ğŸŒ Added language switcher (EN/RU)                    â”‚   â”‚
â”‚  â”‚ - ğŸ¨ Added theme switcher (Dark/Light)                  â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚ ### Improvements                                        â”‚   â”‚
â”‚  â”‚ - âš¡ Faster SSH connection handling                     â”‚   â”‚
â”‚  â”‚ - ğŸ”’ Enhanced security                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚  â”‚ ğŸ” Check for    â”‚  â”‚ â¬‡ï¸ Install      â”‚  âœ… Update available!â”‚
â”‚  â”‚    Updates      â”‚  â”‚    Update       â”‚  (green text)       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ Warning: After updating, you will need to restart the     â”‚
â”‚     application manually using docker-compose restart          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## User Flow

### Step 1: Check for Updates
```
User clicks: "ğŸ” Check for Updates"

â†“

Button changes to: "ğŸ”„ Checking..."

â†“

API call: GET /api/updates/check

â†“

Response received:
{
  "update_available": true,
  "current_version": "0.1.0",
  "latest_version": "0.2.0",
  "release_notes": "## What's New...",
  "can_update": true
}

â†“

UI updates:
- Shows version info
- Shows release notes
- Shows "â¬‡ï¸ Install Update" button
- Status: "âœ… Update available!" (green)
```

### Step 2: Install Update
```
User clicks: "â¬‡ï¸ Install Update"

â†“

Confirmation dialog:
"Are you sure you want to update the application?
You will need to restart the container after the update."

â†“

User confirms

â†“

Button changes to: "â¬‡ï¸ Updating..."
Status: "Downloading updates..." (blue)

â†“

API call: POST /api/updates/perform

â†“

Git operations:
1. git fetch origin
2. git pull origin main

â†“

Response received:
{
  "success": true,
  "updated": true,
  "message": "Successfully updated via pull from main",
  "previous_commit": "abc1234",
  "new_commit": "def5678",
  "restart_required": true
}

â†“

Success message displayed:
"âœ… Successfully updated via pull from main

Previous commit: abc1234
New commit: def5678

âš ï¸ Please restart the application:
docker-compose restart or docker-compose up -d --build"

â†“

Button hidden
Status: "âœ… Update downloaded! Restart required." (green)
```

### Step 3: Restart Application
```
User runs in terminal:

$ docker-compose restart

or

$ docker-compose up -d --build

â†“

Application reloads with new code

â†“

User refreshes browser

â†“

New version is active! ğŸ‰
```

## Error States

### Uncommitted Changes
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Status: âš ï¸ Cannot update: uncommitted changes (orange)        â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ Warning message:                                           â”‚
â”‚  Your working directory has uncommitted changes.               â”‚
â”‚  Please commit or stash them before updating.                  â”‚
â”‚                                                                 â”‚
â”‚  "â¬‡ï¸ Install Update" button is DISABLED                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### No Updates Available
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Current Version: 0.1.0                                         â”‚
â”‚  Current Branch: main                                           â”‚
â”‚  Current Commit: abc1234                                        â”‚
â”‚                                                                 â”‚
â”‚  Status: âœ… You are up to date! (green)                        â”‚
â”‚                                                                 â”‚
â”‚  "â¬‡ï¸ Install Update" button is HIDDEN                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Update Failed
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ Error message:                                              â”‚
â”‚  Update failed: Git operation failed: merge conflict            â”‚
â”‚                                                                 â”‚
â”‚  Status: âŒ Update failed (red)                                â”‚
â”‚                                                                 â”‚
â”‚  Buttons return to normal state                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Color Scheme

### Dark Theme (Default)
- Background: `#181825`
- Text: `#cdd6f4`
- Current values: `#313244` background, `#89b4fa` text
- Buttons: `#89b4fa` background, `#1e1e2e` text
- Success: `#a6e3a1` (green)
- Warning: `#fab387` (orange)
- Error: `#f38ba8` (red)
- Info: `#89b4fa` (blue)

### Light Theme
- Background: `#f5f7fa`
- Text: `#1f2937`
- Current values: `#e5e7eb` background, `#3b82f6` text
- Buttons: `#3b82f6` background, `#ffffff` text
- Success: `#10b981` (green)
- Warning: `#f59e0b` (orange)
- Error: `#ef4444` (red)
- Info: `#3b82f6` (blue)

## Responsive Behavior

### Desktop (> 768px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Check] [Install] Status text here...          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Mobile (< 768px)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Check Update] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Install]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Status text    â”‚
â”‚  here...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## JavaScript Events

```javascript
// Check button clicked
checkUpdatesBtn.onclick = checkForUpdates()

// Install button clicked
performUpdateBtn.onclick = performUpdate()

// Auto-check on page load (optional)
window.addEventListener('DOMContentLoaded', () => {
    // Could auto-check here
});
```

## API Integration

### Check Endpoint
```http
GET /api/updates/check
Authorization: Cookie access_token=<jwt>

Response 200:
{
  "current_version": "0.1.0",
  "current_branch": "main",
  "current_commit": "abc1234",
  "git_clean": true,
  "uncommitted_changes": [],
  "update_available": true,
  "latest_version": "0.2.0",
  "release_url": "https://github.com/4stm4/testum/releases/tag/v0.2.0",
  "release_notes": "## What's New\n...",
  "can_update": true
}
```

### Perform Endpoint
```http
POST /api/updates/perform
Authorization: Cookie access_token=<jwt>
Content-Type: application/json

{}

Response 200:
{
  "success": true,
  "updated": true,
  "message": "Successfully updated via pull from main",
  "previous_commit": "abc1234",
  "new_commit": "def5678",
  "method": "pull from main",
  "restart_required": true
}
```

## Security

- âœ… Requires authentication (JWT token)
- âœ… Only admin users can check/perform updates
- âœ… Git operations run with user permissions
- âœ… No arbitrary code execution
- âœ… Working directory safety checks

## Future Enhancements

- [ ] Auto-check on page load
- [ ] Periodic background checks
- [ ] Notification when update available
- [ ] Update history viewer
- [ ] Rollback functionality from UI
- [ ] Update scheduling
